*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Setup_suite
Force Tags        windows
Test Template     Drop a database
Resource          ../../resources/keywords.txt
Resource          ../../resources/context.txt

*** Test Cases ***    Username           Password           JDBC Connection String    JDBC Driver JAR URI    JDBC Driver Class    Connection Interval    No of Connection Retries    DB Name to drop    Fail if not DB exits    RETCODE      STATUS
1. Normal case success with only required fields
                      [Setup]            Create Database    ${_DB_USERNAME}           ${_DB_USERNAME}        ${_CONN_STRING}      ${_JAR}                ${_CLASS}                   ${_INTRVL}         ${_RETRY}               DB_DROP_1    ${EMPTY}       ${EMPTY}    ${EMPTY}    NO    OFF    OFF    0    ${ENDED_OK}
                      ${_DB_USERNAME}    ${_DB_USERNAME}    ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   DB_DROP_1          NO                      0            ${ENDED_OK}

2. Normal case success with Database name contains space
                      [Setup]            Create Database    ${_DB_USERNAME}           ${_DB_USERNAME}        ${_CONN_STRING}      ${_JAR}                ${_CLASS}                   ${_INTRVL}         ${_RETRY}               DB DROP 2    ${EMPTY}       ${EMPTY}    ${EMPTY}    NO    OFF    OFF    0    ${ENDED_OK}
                      ${_DB_USERNAME}    ${_DB_USERNAME}    ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   DB DROP 2          NO                      0            ${ENDED_OK}

*** Keywords ***
Drop a database
    [Arguments]    ${username}    ${password}    ${jdbc_conn}    ${jdbc_jar}    ${jdbc_class}    ${interval}
    ...    ${retries}    ${db_name}    ${fail_if_not_exists}    ${returnCode}    ${returnStatus}
    # Create Database    ${_DB_USERNAME}    ${_DB_USERNAME}    ${_CONN_STRING}    ${_JAR}    ${_CLASS}    ${_INTRVL}
    #...    ${_RETRY}    DB_DROP    ${EMPTY}    ${EMPTY}    ${EMPTY}    NO
    #...    OFF    OFF    0    ${ENDED_OK}
    Init Action    ${ACTION_DROP_DB}
    Action Set    ${PRT_DROP_DB_USERNAME}    ${username}
    Action Set    ${PRT_DROP_DB_PASSWORD}    ${password}
    Action Set    ${PRT_DROP_DB_JDBC_CONN_STRING}    ${jdbc_conn}
    Action Set    ${PRT_DROP_DB_DRIVER_JAR}    ${jdbc_jar}
    Action Set    ${PRT_DROP_DB_DRIVER_CLASS}    ${jdbc_class}
    Action Set    ${PRT_DROP_DB_CONN_INTRVL}    ${interval}
    Action Set    ${PRT_DROP_DB_CONN_RETRY}    ${retries}
    Action Set    ${PRT_DROP_DB_DROP_DBNAME}    ${db_name}
    Action Set    ${PRT_DROP_DB_FAIL_DB_NOT_EXISTS}    ${fail_if_not_exists}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}
    Action Return Status Should Be    ${returnStatus}

Setup_suite
    [Documentation]    TODO: Write all steps need prepare before testing here
    Log    Start testing for Drop a database backup
