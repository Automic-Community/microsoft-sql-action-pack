*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Setup_suite
Force Tags        windows
Default Tags      ALL
Test Template     Rename a database
Resource          ../../resources/keywords.txt
Resource          ../../resources/context.txt

*** Test Cases ***    Username           Password           JDBC Connection String    JDBC Driver JAR URI    JDBC Driver Class    Connection Interval    No of Connection Retries    Old DB Name      New DB Name         Fail if old DB not exits    Fail if new DB exits    RETCODE    STATUS
1. Normal case success with only required fields
                      ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   DB_RENAME_01     DB_RENAME_01_NEW    NO                          NO                      0          ${ENDED_OK}

2. Success remame to new DB Name has special characters Input
                      ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   DB_RENAME_02     $p3ci@l N@m3        YES                         YES                     0          ${ENDED_OK}

3. Success remame Old DB Name has special characters Input
                      ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   $p3ci@l N@m33    DB_RENAME_03        YES                         YES                     0          ${ENDED_OK}

*** Keywords ***
Rename a database
    [Arguments]    ${username}    ${password}    ${jdbc_conn}    ${jdbc_jar}    ${jdbc_class}    ${interval}
    ...    ${retries}    ${db_name}    ${db_new_name}    ${fail_if_new_exists}    ${fail_if_not_exists}    ${returnCode}
    ...    ${returnStatus}
    Drop Database    ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}    ${_JAR}    ${_CLASS}    ${_INTRVL}
    ...    ${_RETRY}    ${db_new_name}    NO    0    ${ENDED_OK}
    Create Database    ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}    ${_JAR}    ${_CLASS}    ${_INTRVL}
    ...    ${_RETRY}    ${db_name}    ${EMPTY}    ${EMPTY}    ${EMPTY}    NO
    ...    OFF    OFF    0    ${ENDED_OK}
    Init Action    ${ACTION_RENAME_DB}
    Action Set    ${PRT_RENAME_DB_USERNAME}    ${username}
    Action Set    ${PRT_RENAME_DB_PASSWORD}    ${password}
    Action Set    ${PRT_RENAME_DB_JDBC_CONN_STRING}    ${jdbc_conn}
    Action Set    ${PRT_RENAME_DB_DRIVER_JAR}    ${jdbc_jar}
    Action Set    ${PRT_RENAME_DB_DRIVER_CLAS}    ${jdbc_class}
    Action Set    ${PRT_DROP_DB_CONN_INTRVL}    ${interval}
    Action Set    ${PRT_RENAME_DB_CONN_RETRY}    ${retries}
    Action Set    ${PRT_RENAME_DB_OLD_DATABASE_NAME}    ${db_name}
    Action Set    ${PRT_RENAME_DB_NEW_DATABASE_NAME}    ${db_new_name}
    Action Set    ${PRT_RENAME_DB_FAIL_OLD_DB_NOT_EXISTS}    ${fail_if_not_exists}
    Action Set    ${PRT_RENAME_DB_FAIL_NEW_DB_EXISTS}    ${fail_if_new_exists}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}
    Action Return Status Should Be    ${returnStatus}

Setup_suite
    [Documentation]    TODO: Write all steps need prepare before testing here
    Log    Start testing for Rename a database
