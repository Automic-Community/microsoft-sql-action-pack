*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Setup_suite
Force Tags        windows
Test Template     Create DB User
Resource          ../../resources/keywords.txt
Resource          ../../resources/context.txt

*** Test Cases ***    OK_NOK     FLAG          Username                Password                  JDBC Connection String    JDBC Driver JAR URI    JDBC Driver Class    Connection Interval    No of Connection Retries    DB Name                   Name of User to Create    Map User to Login Name    Default Schema    Fail if exists    RETCODE    STATUS
1. Success with normal case
                      [Setup]    Setup_test    TEST_LOGIN_DB_USER_1    ${_DB_NAME}
                      OK         TEST          ${_DB_USERNAME}         ${_DB_PASSWORD}           ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}               TEST_DB_USER              TEST_LOGIN_DB_USER_1      ${EMPTY}          NO                0          ${ENDED_OK}

2. Success with Map user to Login Name is EMPTY
                      OK         TEST          ${_DB_USERNAME}         ${_DB_PASSWORD}           ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}               TEST_DB_USER              ${EMPTY}                  ${EMPTY}          NO                0          ${ENDED_OK}

3. Success with case DB User is existed and Fail If Exists = NO
                      [Setup]    Setup_test    TEST_LOGIN_DB_USER_3    ${_DB_NAME}
                      OK         TEST          ${_DB_USERNAME}         ${_DB_PASSWORD}           ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}               TEST_DB_USER              TEST_LOGIN_DB_USER_3      ${EMPTY}          NO                0          ${ENDED_OK}
                      OK         FINAL         ${_DB_USERNAME}         ${_DB_PASSWORD}           ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}               TEST_DB_USER              TEST_LOGIN_DB_USER_3      ${EMPTY}          NO                0          ${ENDED_OK}

4. Success with default schema
                      [Setup]    Setup_test    TEST_LOGIN_DB_USER_4    ${_DB_NAME}
                      OK         TEST          ${_DB_USERNAME}         ${_DB_PASSWORD}           ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}               TEST_DB_USER              TEST_LOGIN_DB_USER_4      dbo               NO                0          ${ENDED_OK}

5. Success with dataname contains space
                      [Setup]    Setup_test    TEST_LOGIN_DB_USER_5    ${_DB_NAME_WITH_SPACE}
                      OK         TEST          ${_DB_USERNAME}         ${_DB_PASSWORD}           ${_CONN_STRING}           ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME_WITH_SPACE}    TEST_DB_USER              TEST_LOGIN_DB_USER_4      dbo               NO                0          ${ENDED_OK}

*** Keywords ***
Setup_suite
    [Documentation]    TODO: Write all steps need prepare before testing here
    Log    Start testing for Create DB User Template

Setup_test
    [Arguments]    ${setup_login_name}    ${db_name}
    Drop Login    OK    ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}    ${_JAR}    ${_CLASS}
    ...    ${_INTRVL}    ${_RETRY}    ${setup_login_name}    NO    0    ${ENDED_OK}
    Create Login    OK    NO_TIMESTAMP    ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}    ${_JAR}
    ...    ${_CLASS}    ${_INTRVL}    ${_RETRY}    ${db_name}    ${setup_login_name}    NO
    ...    ${setup_login_name}    NO    NO    NO    NO    0
    ...    ${ENDED_OK}
