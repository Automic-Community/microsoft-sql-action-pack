*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Setup_suite    TEST_LOGIN_DB_USER
Force Tags        windows
Test Template     Create DB User
Resource          ../../resources/keywords.txt
Resource          ../../resources/context.txt

*** Test Cases ***    OK_NOK    FLAG     Username                   Password                   JDBC Connection String     JDBC Driver JAR URI    JDBC Driver Class    Connection Interval    No of Connection Retries    DB Name                Name of User to Create    Map User to Login Name    Default Schema    Fail If Exists    RETCODE    STATUS
1. Fail with invalid username
                      NOK       TEST     ${_DB_USERNAME}_invalid    ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            TEST_CREATE_DB_USER       TEST_LOGIN_DB_USER        ${EMPTY}          NO                0          ${ENDED_NOK}

2. Fail with invalid password
                      NOK       TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}_invalid    ${_CONN_STRING}            ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            TEST_CREATE_DB_USER       TEST_LOGIN_DB_USER        ${EMPTY}          NO                0          ${ENDED_NOK}

3. Fail with invalid jdbc connection string
                      NOK       TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}_invalid    ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            TEST_CREATE_DB_USER       TEST_LOGIN_DB_USER        ${EMPTY}          NO                0          ${ENDED_NOK}

4. Fail with invalid JDBC Driver Jar URI
                      NOK       TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}_invalid        ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            TEST_CREATE_DB_USER       TEST_LOGIN_DB_USER        ${EMPTY}          NO                0          ${ENDED_NOK}

5. Fail with invalid JDBC Driver Class
                      NOK       TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}                ${_CLASS}_invalid    ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            TEST_CREATE_DB_USER       TEST_LOGIN_DB_USER        ${EMPTY}          NO                0          ${ENDED_NOK}

6. Fail with invalid DB Name and Fail If Exists = YES
                      NOK       TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}_invalid    TEST_CREATE_DB_USER       TEST_LOGIN_DB_USER        ${EMPTY}          YES               0          ${ENDED_NOK}

7. Fail with invalid DB Name and Fail If Exists = NO
                      NOK       TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}_invalid    TEST_CREATE_DB_USER       TEST_LOGIN_DB_USER        ${EMPTY}          NO                0          ${ENDED_NOK}

8. Fail with invalid Login Name
                      NOK       TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            TEST_CREATE_DB_USER       _invalid                  ${EMPTY}          NO                0          ${ENDED_NOK}

9. Fail with case DB User is existed and Fail If Exists = YES
                      OK        TEST     ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            ${_DB_USERNAME}           TEST_LOGIN_DB_USER        ${EMPTY}          NO                0          ${ENDED_OK}
                      NOK       FINAL    ${_DB_USERNAME}            ${_DB_PASSWORD}            ${_CONN_STRING}            ${_JAR}                ${_CLASS}            ${_INTRVL}             ${_RETRY}                   ${_DB_NAME}            ${_DB_USERNAME}           TEST_LOGIN_DB_USER        ${EMPTY}          YES               0          ${ENDED_NOK}

*** Keywords ***
Setup_suite
    [Arguments]    ${setup_login_name}
    [Documentation]    TODO: Write all steps need prepare before testing here
    Log    Start testing for Create DB User Template
    Drop Login    OK    ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}    ${_JAR}    ${_CLASS}
    ...    ${_INTRVL}    ${_RETRY}    ${setup_login_name}    NO    0    ${ENDED_OK}
    Create Login    OK    NO_TIMESTAMP    ${_DB_USERNAME}    ${_DB_PASSWORD}    ${_CONN_STRING}    ${_JAR}
    ...    ${_CLASS}    ${_INTRVL}    ${_RETRY}    ${_DB_NAME}    ${setup_login_name}    NO
    ...    ${setup_login_name}    NO    NO    NO    NO    0
    ...    ${ENDED_OK}
